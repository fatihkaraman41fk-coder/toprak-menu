<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toprak Bakery House • Menü</title>

  <!-- Cache kırmak için sadece buradaki v değerini artır -->
  <link rel="stylesheet" href="style.css?v=20260213-99">
</head>

<body>

  <section class="hero" id="hero">
    <div class="hero__overlay"></div>
    <div class="hero__content">
      <div class="hero__badge">Since 2026 • İzmit</div>
      <h1>Toprak Bakery House</h1>
      <p>Artisan Sourdough • Specialty Coffee</p>
    </div>
  </section>

  <header class="topbar" id="topbar">
    <div class="brand">
      <div class="brand__title">Toprak Bakery House</div>
      <div class="brand__sub">QR Menü • Servis: 15–20 dk • F.D.T: 19.01.2026</div>
    </div>

    <nav class="tabs" aria-label="Menü Kategorileri">
      <a href="#kahvalti">Kahvaltı</a>
      <a href="#tartine">Tartine</a>
      <a href="#sandvic">Sandviç</a>
      <a href="#firin">Fırın</a>
      <a href="#tatlilar">Tatlılar</a>
      <a href="#icecek">İçecek</a>
    </nav>
  </header>

  <main class="wrap">
    <section class="section">
      <div class="notice">
        Tezgah ürünleri gün içerisinde tükenmektedir, lütfen sorunuz. Özel tercih ve alerjinizi sipariş verirken belirtiniz.
        Fiyatlarımız TL cinsindedir ve KDV dahildir.
      </div>
    </section>

    <!-- KAHVALTI -->
    <section id="kahvalti" class="section">
      <h2>Kahvaltı</h2>

      <a class="item" href="#" role="button">
        <img class="item__img" src="images/toprak-granola.jpg" alt="Toprak Granola" />
        <div class="item__body">
          <div class="item__name">Toprak Granola</div>
          <div class="item__desc">El yapımı granola, süzme yoğurt, mevsim meyveleri, yer fıstığı ezmesi. (Glutensiz/çiğ karabuğday +40 TL)</div>
        </div>
        <div class="item__price">380 TL</div>
      </a>

      <a class="item" href="#" role="button">
        <img class="item__img" src="images/placeholder.png" alt="Toprak Kahvaltı" />
        <div class="item__body">
          <div class="item__name">Toprak Kahvaltı</div>
          <div class="item__desc">2 dilim ekşi mayalı ekmek, çırpılmış yumurta, domates, salatalık, zeytin, tereyağ, acuka, ezine peyniri, mevsim reçeli, yeşillik</div>
        </div>
        <div class="item__price">420 TL</div>
      </a>
    </section>

    <!-- (Diğer bölümler sende var, aynen devam edebilirsin) -->

    <footer class="footer">
      <div>© Toprak Bakery House</div>
    </footer>
  </main>

  <!-- ✅ LIGHTBOX -->
  <div id="lightbox" class="lightbox" aria-hidden="true">
    <div class="lightbox__backdrop" data-close="1"></div>

    <div class="lightbox__panel" role="dialog" aria-modal="true" aria-label="Ürün Detayı">
      <button type="button" class="lightbox__close" aria-label="Kapat">✕</button>

      <div class="lightbox__content">
        <img id="lightboxImg" class="lightbox__img" alt="" />
        <div class="lightbox__meta">
          <div id="lightboxTitle" class="lightbox__title"></div>
          <div id="lightboxPrice" class="lightbox__price"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ✅ 1) Topbar compact
    document.addEventListener('DOMContentLoaded', () => {
      const topbar = document.getElementById('topbar');
      if (!topbar) return;

      const onCompact = () => {
        if (window.scrollY > 40) topbar.classList.add('is-compact');
        else topbar.classList.remove('is-compact');
      };

      window.addEventListener('scroll', onCompact, { passive: true });
      onCompact();
    });

    // ✅ 2) GARANTİ: hero bittiğinde topbar fixed olur (kaybolma sıfır)
    document.addEventListener('DOMContentLoaded', () => {
      const topbar = document.getElementById('topbar');
      const hero = document.getElementById('hero');
      if (!topbar || !hero) return;

      let topbarH = 0;

      const sync = () => {
        topbarH = topbar.offsetHeight || 0;
        document.documentElement.style.setProperty('--topbar-h', topbarH + 'px');
      };

      const onScroll = () => {
        const heroBottom = hero.offsetHeight || 0;
        if (window.scrollY >= heroBottom) {
          topbar.classList.add('is-fixed');
          document.body.classList.add('has-fixed-topbar');
        } else {
          topbar.classList.remove('is-fixed');
          document.body.classList.remove('has-fixed-topbar');
        }
      };

      sync();
      window.addEventListener('resize', sync);
      window.addEventListener('scroll', onScroll, { passive: true });
      onScroll();
    });

    // ✅ 3) Lightbox (mobil + PC garanti)
    document.addEventListener('DOMContentLoaded', () => {
      const lb = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightboxImg');
      const lbTitle = document.getElementById('lightboxTitle');
      const lbPrice = document.getElementById('lightboxPrice');
      const btnClose = lb?.querySelector('.lightbox__close');

      if (!lb || !lbImg || !lbTitle || !lbPrice || !btnClose) return;

      let scrollY = 0;

      const lockScroll = () => {
        scrollY = window.scrollY || 0;
        document.body.style.position = 'fixed';
        document.body.style.top = `-${scrollY}px`;
        document.body.style.left = '0';
        document.body.style.right = '0';
        document.body.style.width = '100%';
      };

      const unlockScroll = () => {
        document.body.style.position = '';
        document.body.style.top = '';
        document.body.style.left = '';
        document.body.style.right = '';
        document.body.style.width = '';
        window.scrollTo(0, scrollY);
      };

      const open = (src, alt, title, price) => {
        lbImg.src = src;
        lbImg.alt = alt || 'Ürün fotoğrafı';
        lbTitle.textContent = title || '';
        lbPrice.textContent = price || '';
        lb.classList.add('is-open');
        lb.setAttribute('aria-hidden', 'false');
        lockScroll();
      };

      const close = () => {
        lb.classList.remove('is-open');
        lb.setAttribute('aria-hidden', 'true');
        lbImg.src = '';
        unlockScroll();
      };

      document.addEventListener('click', (e) => {
        const item = e.target.closest('a.item');
        if (!item) return;
        e.preventDefault();

        const img = item.querySelector('img.item__img');
        if (!img) return;

        const title = item.querySelector('.item__name')?.textContent || '';
        const price = item.querySelector('.item__price')?.textContent || '';
        open(img.src, img.alt, title, price);
      });

      btnClose.addEventListener('click', (e) => { e.preventDefault(); close(); });

      lb.addEventListener('click', (e) => {
        if (e.target?.dataset?.close === "1") close();
      });

      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && lb.classList.contains('is-open')) close();
      });
    });
  </script>

</body>
</html>
